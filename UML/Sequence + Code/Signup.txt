@startuml Signup Flow
actor User
boundary UI
control Service
database DB

User -> UI: Click Signup Button
UI --> User: Show Registration Form

User -> UI: Enter Username

alt Normal signup flow
    UI -> Service: Check Username Availability
    Service -> DB: Check Username Exists
    DB --> Service: 200 OK (Result)

    alt Username Exists
        Service --> UI: 409 Conflict (Username already exists)
        UI --> User: Show Username Warning
    else Username Does Not Exist
        Service --> UI: 200 OK (Username available)
        UI --> User: Username Accepted
    end

    User -> UI: Enter Password
    alt Password Invalid Format
        UI --> User: 400 Bad Request (Invalid password format)
    end

    User -> UI: Confirm Password
    alt Password and Confirmation Don't Match
        UI --> User: 400 Bad Request (Passwords mismatch)
    end

    User -> UI: Fill Registration Form
    UI -> Service: Submit Registration Form

    alt Form Filled Correctly
        Service -> DB: Create User Account
        DB --> Service: 201 Created (User row created)

        alt User Created Successfully
            Service --> UI: 201 Created (Registration success)
            UI -> UI: Redirect to Login Page
            UI --> User: Show Success Message
        else User Creation Failed
            Service --> UI: 400 Bad Request (Registration failed)
            UI --> User: Show Error Message
        end
    else Form Contains Errors
        UI --> User: 400 Bad Request (Form validation errors)
    end
end

alt Exception
    Service --> UI: 500 Internal Server Error
    UI --> User: Display Error Message
end
@enduml
