@startuml
title Payment Process

actor Patient as "Patient/Staff"
boundary UI
control Service
database Database

Patient -> UI: Select payment method
UI -> Service: Payment request (invoiceId, amount)
activate Service

Service -> Service: Create payment & authorize with gateway

alt Payment fail or timeout
  Service --> UI: Payment failed / pending
  deactivate Service
  UI --> Patient: Display failed/pending
else Payment success
  Service -> Database: Set invoice status = PAID
  Database --> Service: Update success
  Service -> Service: Send receipt email (internal notify)
  Service --> UI: Payment complete (success)
  deactivate Service
  UI --> Patient: Show success\n(+ email receipt)
end
@enduml