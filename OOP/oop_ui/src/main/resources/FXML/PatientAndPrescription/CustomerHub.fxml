<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<SplitPane dividerPositions="0.25" prefHeight="800.0" prefWidth="1200.0" styleClass="main-container" stylesheets="@../../css/main.css,@../../css/forms.css,@../../css/buttons.css,@../../css/layouts.css,@../../css/tables.css,@../../css/financial-report.css" xmlns="http://javafx.com/javafx/17.0.2" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.oop.Control.PatientAndPrescription.CustomerHubController">

    <!-- LEFT PANEL: Customer List & Filters -->
    <items>
        <VBox spacing="16.0">
            <padding>
                <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
            </padding>

            <TitledPane expanded="true" styleClass="titled-pane" text="ðŸ‘¥ Bá»†NH NHÃ‚N">
                <VBox spacing="12">
                    <padding>
                        <Insets bottom="12" left="12" right="12" top="12" />
                    </padding>

                    <Button fx:id="addCustomerButton" maxWidth="Infinity" onAction="#onAddCustomerButton" styleClass="btn-success" text="âž• ThÃªm Má»›i" />

                    <TextField fx:id="searchField" promptText="TÃ¬m kiáº¿m theo tÃªn hoáº·c ID..." styleClass="text-field" />

                    <Separator />

                    <Label styleClass="form-label" text="Lá»c theo:" />

                    <ComboBox fx:id="genderFilter" maxWidth="Infinity" promptText="Giá»›i tÃ­nh" style="-fx-text-fill: #2C3E50;" styleClass="combo-rounded" />

                    <Label styleClass="form-label" text="NgÃ y sinh tá»«:" />
                    <DatePicker fx:id="dobFromPicker" maxWidth="Infinity" promptText="Chá»n ngÃ y báº¯t Ä‘áº§u" />

                    <Label styleClass="form-label" text="NgÃ y sinh Ä‘áº¿n:" />
                    <DatePicker fx:id="dobToPicker" maxWidth="Infinity" promptText="Chá»n ngÃ y káº¿t thÃºc" />

                    <HBox spacing="8">
                        <Button fx:id="applyFilterButton" onAction="#applyFilters" prefWidth="80" style="-fx-background-color: #28a745; -fx-text-fill: white;" styleClass="btn-search" text="Lá»c" />
                        <Button fx:id="resetFilterButton" onAction="#resetFilters" prefWidth="80" style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-border-width: 0;" styleClass="btn-secondary" text="Há»§y" />
                    </HBox>

                    <Separator />

                    <ListView fx:id="customerListView" VBox.vgrow="ALWAYS" />
                </VBox>
            </TitledPane>
        </VBox>
    </items>

    <!-- RIGHT PANEL: Customer Details -->
    <items>
        <BorderPane>
            <top>
                <VBox>
                    <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="financial-header">
                        <padding>
                            <Insets bottom="16.0" left="24.0" right="24.0" top="16.0" />
                        </padding>

                        <Label fx:id="customerNameLabel" styleClass="page-title" text="[CHá»ŒN Bá»†NH NHÃ‚N]" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="editCustomerButton" onAction="#handleEditCustomer" styleClass="btn-secondary" text="Chá»‰nh sá»­a" />
                    </HBox>

                    <Separator />

                    <GridPane hgap="12.0" styleClass="info-panel" vgap="10.0">
                        <padding>
                            <Insets bottom="16.0" left="24.0" right="24.0" top="16.0" />
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints hgrow="NEVER" minWidth="80.0" />
                            <ColumnConstraints hgrow="ALWAYS" />
                            <ColumnConstraints hgrow="NEVER" minWidth="80.0" />
                            <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>

                        <Label styleClass="form-label" text="MÃ£ BN:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="customerIdValueLabel" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                        <Label styleClass="form-label" text="NgÃ y sinh:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                        <Label fx:id="customerDobValueLabel" text="-" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                        <Label styleClass="form-label" text="Giá»›i tÃ­nh:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="customerGenderValueLabel" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                        <Label styleClass="form-label" text="Tuá»•i:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                        <Label fx:id="customerAgeValueLabel" text="-" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>
                </VBox>
            </top>

            <center>
                <TabPane styleClass="financial-tabs" tabClosingPolicy="UNAVAILABLE">
                    <tabs>
                        <!-- TAB 1: Overview -->
                        <Tab text="ðŸ“‹ Tá»•ng Quan">
                            <VBox spacing="16">
                                <padding>
                                    <Insets bottom="24.0" left="24.0" right="24.0" top="24.0" />
                                </padding>

                                <TitledPane expanded="true" styleClass="titled-pane" text="ðŸ“ THÃ”NG TIN CHI TIáº¾T">
                                    <GridPane hgap="12" vgap="15">
                                        <padding>
                                            <Insets bottom="15" left="15" right="15" top="15" />
                                        </padding>
                                        <columnConstraints>
                                            <ColumnConstraints halignment="RIGHT" minWidth="100" />
                                            <ColumnConstraints hgrow="ALWAYS" />
                                        </columnConstraints>

                                        <Label styleClass="form-label" text="Äá»‹a chá»‰:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                        <TextField fx:id="addressField" editable="false" styleClass="text-field" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                        <Label styleClass="form-label" text="Äiá»‡n thoáº¡i:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                        <TextField fx:id="phoneField" editable="false" styleClass="text-field" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                        <Label styleClass="form-label" text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                        <TextField fx:id="emailField" editable="false" styleClass="text-field" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                        <Label styleClass="form-label" text="Ghi chÃº:" GridPane.columnIndex="0" GridPane.rowIndex="3" GridPane.valignment="TOP">
                                            <padding>
                                                <Insets top="8.0" />
                                            </padding>
                                        </Label>
                                        <TextArea fx:id="notesArea" editable="false" prefRowCount="4" styleClass="text-area" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                              <rowConstraints>
                                 <RowConstraints />
                                 <RowConstraints />
                                 <RowConstraints />
                                 <RowConstraints />
                              </rowConstraints>
                                    </GridPane>
                                </TitledPane>
                            </VBox>
                        </Tab>

                        <!-- TAB 2: Exam History -->
                        <Tab text="ðŸ“‹ Lá»‹ch sá»­ KhÃ¡m &amp; KÃª Ä‘Æ¡n">
                            <BorderPane>
                                <top>
                                    <HBox alignment="CENTER_RIGHT" spacing="12.0" styleClass="filter-bar">
                                        <padding>
                                            <Insets bottom="12.0" left="24.0" right="24.0" top="12.0" />
                                        </padding>
                                        <Button fx:id="editPrescriptionButton" onAction="#handleEditPrescription" styleClass="btn-secondary" text="Chá»‰nh sá»­a" />
                                        <Button onAction="#onAddNewPrescription" styleClass="btn-success" text="âž• ThÃªm Há»“ sÆ¡ khÃ¡m má»›i" />
                                    </HBox>
                                </top>

                                <center>
                                    <TableView fx:id="examHistoryTable" styleClass="financial-table">
                                        <columns>
                                            <TableColumn fx:id="signedAtCollumn" prefWidth="120" text="NgÃ y KhÃ¡m" />
                                            <TableColumn fx:id="appointmentIdCollumn" prefWidth="200" text="ID Buá»•i khÃ¡m" />
                                            <TableColumn fx:id="chiefComplaintCollumn" prefWidth="300" text="LÃ½ Do KhÃ¡m" />
                                            <TableColumn fx:id="diagnosisCollumn" prefWidth="300" text="Cháº©n ÄoÃ¡n" />
                                        </columns>

                                        <placeholder>
                                            <VBox alignment="CENTER" spacing="10">
                                                <padding>
                                                    <Insets bottom="40" left="40" right="40" top="40" />
                                                </padding>
                                                <Label text="ChÆ°a cÃ³ lá»‹ch sá»­ khÃ¡m bá»‡nh" />
                                                <Label text="ThÃªm há»“ sÆ¡ khÃ¡m má»›i Ä‘á»ƒ báº¯t Ä‘áº§u" />
                                            </VBox>
                                        </placeholder>
                                    </TableView>
                                </center>
                            </BorderPane>
                        </Tab>
                    </tabs>
                </TabPane>
            </center>
        </BorderPane>
    </items>
</SplitPane>
