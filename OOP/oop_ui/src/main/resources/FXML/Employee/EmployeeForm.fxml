<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800.0" prefWidth="1280.0" style="-fx-background-color: #f8f9fa;" stylesheets="@../../css/buttons.css,@../../css/employee-pink-theme.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.oop.Control.Employee.EmployeeFormController">

    <!-- ========== HEADER ========== -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #0EA5E9, #38BDF8); -fx-padding: 25px;">
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label style="-fx-font-size: 32px;" text="ðŸ‘¤" />
                <VBox spacing="3">
                    <Label fx:id="titleLabel" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;" text="ThÃªm NhÃ¢n ViÃªn Má»›i" />
                    <Label fx:id="subtitleLabel" style="-fx-font-size: 13px; -fx-text-fill: rgba(255,255,255,0.9);" text="Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin bÃªn dÆ°á»›i" />
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- ========== CENTER: Image vÃ  ThÃ´ng tin nháº­p liá»‡u ========== -->
    <center>
        <HBox prefHeight="610.0" prefWidth="1280.0" BorderPane.alignment="CENTER">
            <children>
                <!-- BÃªn trÃ¡i: Image (load at runtime in controller to avoid FXML resource errors) -->
                <ImageView fx:id="leftImageView" fitHeight="610.0" fitWidth="430.0" pickOnBounds="true" preserveRatio="true" HBox.hgrow="ALWAYS" />

                <!-- BÃªn pháº£i: ThÃ´ng tin nháº­p liá»‡u -->
                <VBox prefHeight="610.0" prefWidth="680.0" HBox.hgrow="ALWAYS">
                    <children>
                        <ScrollPane fitToWidth="true" prefHeight="610.0" prefWidth="696.0" style="-fx-background-color: transparent; -fx-background: transparent;">
                            <VBox prefHeight="1100.0" prefWidth="402.0" spacing="18" style="-fx-background-color: white; -fx-background-radius: 12px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                                <VBox.margin>
                                    <Insets bottom="15" left="25" right="25" top="15" />
                                </VBox.margin>
                                <padding>
                                    <Insets bottom="20" left="25" right="25" top="20" />
                                </padding>

                                <!-- ========== SECTION 1: ThÃ´ng tin Ä‘Äƒng nháº­p ========== -->
                                <VBox spacing="15">
                                    <Label style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #0EA5E9; -fx-border-color: #0EA5E9; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;" text="ðŸ” ThÃ´ng Tin ÄÄƒng Nháº­p" />

                                    <GridPane hgap="15" vgap="15">
                                        <!-- Username -->
                                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="0">
                                            <Label styleClass="form-label" text="TÃªn Ä‘Äƒng nháº­p *" />
                                            <TextField fx:id="usernameField" promptText="Nháº­p tÃªn Ä‘Äƒng nháº­p (tá»‘i thiá»ƒu 3 kÃ½ tá»±, khÃ´ng dáº¥u)" styleClass="text-field" />
                                            <Label fx:id="usernameError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <!-- Password -->
                                        <VBox fx:id="passwordBox" spacing="6" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="1">
                                            <Label styleClass="form-label" text="Máº­t kháº©u *" />
                                            <PasswordField fx:id="passwordField" promptText="Nháº­p máº­t kháº©u (tá»‘i thiá»ƒu 6 kÃ½ tá»±)" styleClass="text-field" />
                                            <Label fx:id="passwordError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <columnConstraints>
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
                                </VBox>

                                <Separator style="-fx-background-color: rgba(244, 114, 182, 0.3);" />

                                <!-- ========== SECTION 2: ThÃ´ng tin cÃ¡ nhÃ¢n ========== -->
                                <VBox spacing="15">
                                    <Label style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #0EA5E9; -fx-border-color: #0EA5E9; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;" text="ðŸ‘¨â€âš•ï¸ ThÃ´ng Tin CÃ¡ NhÃ¢n" />

                                    <GridPane hgap="15" vgap="15">
                                        <!-- Firstname -->
                                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <Label styleClass="form-label" text="Há» vÃ  tÃªn Ä‘á»‡m *" />
                                            <TextField fx:id="firstnameField" promptText="VÃ­ dá»¥: Nguyá»…n VÄƒn" styleClass="text-field" />
                                            <Label fx:id="firstnameError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <!-- Lastname -->
                                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <Label styleClass="form-label" text="TÃªn *" />
                                            <TextField fx:id="lastnameField" promptText="VÃ­ dá»¥: An" styleClass="text-field" />
                                            <Label fx:id="lastnameError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <!-- Email -->
                                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                            <Label styleClass="form-label" text="Email *" />
                                            <TextField fx:id="emailField" promptText="example@eyeclinic.com" styleClass="text-field" />
                                            <Label fx:id="emailError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <!-- Phone -->
                                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                            <Label styleClass="form-label" text="Sá»‘ Ä‘iá»‡n thoáº¡i *" />
                                            <TextField fx:id="phoneField" promptText="0901234567 (10 sá»‘)" styleClass="text-field" />
                                            <Label fx:id="phoneError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <columnConstraints>
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
                                </VBox>

                                <Separator style="-fx-background-color: rgba(244, 114, 182, 0.3);" />

                                <!-- ========== SECTION 3: ThÃ´ng tin nghá» nghiá»‡p ========== -->
                                <VBox spacing="15">
                                    <Label style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #0EA5E9; -fx-border-color: #0EA5E9; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;" text="ðŸ’¼ ThÃ´ng Tin Nghá» Nghiá»‡p" />

                                    <GridPane hgap="15" vgap="15">
                                        <!-- Role -->
                                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <Label styleClass="form-label" text="Vai trÃ² *" />
                                            <ComboBox fx:id="roleComboBox" maxWidth="Infinity" styleClass="combo-rounded">
                                                <items>
                                                    <FXCollections fx:factory="observableArrayList">
                                                        <String fx:value="doctor" />
                                                        <String fx:value="nurse" />
                                                    </FXCollections>
                                                </items>
                                            </ComboBox>
                                            <HBox spacing="5" style="-fx-padding: 5 0 0 0;">
                                                <Label style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;" text="â„¹ï¸" />
                                                <Label style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;" text="Doctor = BÃ¡c sÄ© | Nurse = Y tÃ¡/Thu ngÃ¢n/Quáº£n lÃ½" />
                                            </HBox>
                                            <Label style="-fx-font-size: 11px; -fx-text-fill: #e67e22; -fx-font-style: italic;" text="Chá»n Doctor thÃ¬ PHáº¢I nháº­p sá»‘ giáº¥y phÃ©p." />
                                        </VBox>

                                        <!-- Active Status -->
                                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <Label styleClass="form-label" text="Tráº¡ng thÃ¡i" />
                                            <CheckBox fx:id="activeCheckBox" selected="true" style="-fx-font-size: 13px; -fx-text-fill: #2c3e50; -fx-padding: 8 0 0 0;" text="NhÃ¢n viÃªn Ä‘ang hoáº¡t Ä‘á»™ng" />
                                        </VBox>

                                        <!-- License No (only visible for doctors) -->
                                        <VBox fx:id="licenseBox" spacing="6" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="1">
                                            <Label styleClass="form-label" text="Sá»‘ giáº¥y phÃ©p hÃ nh nghá» *" />
                                            <TextField fx:id="licenseNoField" promptText="Nháº­p sá»‘ giáº¥y phÃ©p (báº¯t buá»™c cho bÃ¡c sÄ©)" style="-fx-background-color: #fff3cd; -fx-border-color: #ffc107; -fx-border-radius: 6px; -fx-background-radius: 6px; -fx-padding: 10px;" />
                                            <HBox spacing="5">
                                                <Label style="-fx-font-size: 11px; -fx-text-fill: #f39c12;" text="âš ï¸" />
                                                <Label style="-fx-font-size: 11px; -fx-text-fill: #f39c12; -fx-font-weight: bold;" text="Báº¯t buá»™c pháº£i nháº­p sá»‘ giáº¥y phÃ©p hÃ nh nghá» cho bÃ¡c sÄ©" />
                                            </HBox>
                                            <Label fx:id="licenseNoError" managed="false" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="" visible="false" />
                                        </VBox>

                                        <columnConstraints>
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
         
                                     <!-- Avatar URL -->
                                     <VBox spacing="6">
                                         <Label styleClass="form-label" text="áº¢nh Ä‘áº¡i diá»‡n (URL)" />
                                         <TextField fx:id="avatarField" promptText="Nháº­p URL áº£nh Ä‘áº¡i diá»‡n" styleClass="text-field" />
                                     </VBox>
                                </VBox>
                            </VBox>
                        </ScrollPane>
                    </children>
                </VBox>
            </children>
        </HBox>
    </center>

    <!-- ========== BOTTOM: Action Buttons ========== -->
    <bottom>
        <VBox style="-fx-background-color: white;">
            <Separator style="-fx-background-color: rgba(244, 114, 182, 0.3);" />
            <HBox alignment="CENTER_RIGHT" spacing="12" style="-fx-padding: 16; -fx-background-color: #f8f9fa;">
                <Button fx:id="cancelButton" mnemonicParsing="false" onAction="#handleCancel" prefHeight="45.0" prefWidth="138.0" styleClass="btn-secondary" text="âŒ Há»§y Bá»" />
                <Button fx:id="saveButton" defaultButton="true" mnemonicParsing="false" onAction="#handleSave" prefHeight="45.0" prefWidth="199.0" styleClass="btn-success" text="ðŸ’¾ LÆ°u ThÃ´ng Tin" />
            </HBox>
        </VBox>
    </bottom>

</BorderPane>

