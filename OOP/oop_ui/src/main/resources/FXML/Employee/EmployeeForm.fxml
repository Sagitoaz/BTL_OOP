<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.oop.Control.Employee.EmployeeFormController"
            prefHeight="680.0" prefWidth="600.0"
            style="-fx-background-color: #f8f9fa;">

    <!-- ========== HEADER ========== -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-padding: 25;">
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ‘¤" style="-fx-font-size: 32px;"/>
                <VBox spacing="3">
                    <Label fx:id="titleLabel" text="ThÃªm NhÃ¢n ViÃªn Má»›i" 
                           style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <Label fx:id="subtitleLabel" text="Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin bÃªn dÆ°á»›i" 
                           style="-fx-font-size: 13px; -fx-text-fill: rgba(255,255,255,0.9);"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- ========== FORM CONTENT ========== -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="20" style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                <VBox.margin><Insets top="20" right="30" bottom="20" left="30"/></VBox.margin>
                <padding><Insets top="25" right="30" bottom="25" left="30"/></padding>

                <!-- ========== SECTION 1: ThÃ´ng tin Ä‘Äƒng nháº­p ========== -->
                <VBox spacing="15">
                    <Label text="ðŸ” ThÃ´ng Tin ÄÄƒng Nháº­p" 
                           style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-border-color: #3498db; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;"/>

                    <GridPane hgap="15" vgap="15">
                        <!-- Username -->
                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.columnSpan="2">
                            <Label text="TÃªn Ä‘Äƒng nháº­p *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="usernameField"
                                      promptText="Nháº­p tÃªn Ä‘Äƒng nháº­p (tá»‘i thiá»ƒu 3 kÃ½ tá»±, khÃ´ng dáº¥u)"
                                      style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="usernameError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <!-- Password (only for Add mode) -->
                        <VBox fx:id="passwordBox" spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.columnSpan="2">
                            <Label text="Máº­t kháº©u *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <PasswordField fx:id="passwordField"
                                          promptText="Nháº­p máº­t kháº©u (tá»‘i thiá»ƒu 6 kÃ½ tá»±)"
                                          style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="passwordError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <columnConstraints>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                        </columnConstraints>
                    </GridPane>
                </VBox>

                <Separator style="-fx-background-color: #ecf0f1;"/>

                <!-- ========== SECTION 2: ThÃ´ng tin cÃ¡ nhÃ¢n ========== -->
                <VBox spacing="15">
                    <Label text="ðŸ‘¨â€âš•ï¸ ThÃ´ng Tin CÃ¡ NhÃ¢n" 
                           style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-border-color: #2ecc71; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;"/>

                    <GridPane hgap="15" vgap="15">
                        <!-- Firstname -->
                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <Label text="Há» vÃ  tÃªn Ä‘á»‡m *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="firstnameField"
                                      promptText="VÃ­ dá»¥: Nguyá»…n VÄƒn"
                                      style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="firstnameError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <!-- Lastname -->
                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="0">
                            <Label text="TÃªn *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="lastnameField"
                                      promptText="VÃ­ dá»¥: An"
                                      style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="lastnameError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <!-- Email -->
                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <Label text="Email *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="emailField"
                                      promptText="example@eyeclinic.com"
                                      style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="emailError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <!-- Phone -->
                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="1">
                            <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="phoneField"
                                      promptText="0901234567 (10 sá»‘)"
                                      style="-fx-font-size: 13px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <Label fx:id="phoneError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <columnConstraints>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                        </columnConstraints>
                    </GridPane>
                </VBox>

                <Separator style="-fx-background-color: #ecf0f1;"/>

                <!-- ========== SECTION 3: ThÃ´ng tin nghá» nghiá»‡p ========== -->
                <VBox spacing="15">
                    <Label text="ðŸ’¼ ThÃ´ng Tin Nghá» Nghiá»‡p" 
                           style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-border-color: #e67e22; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;"/>

                    <GridPane hgap="15" vgap="15">
                        <!-- Role -->
                        <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <Label text="Vai trÃ² *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <ComboBox fx:id="roleComboBox"
                                     maxWidth="Infinity"
                                     style="-fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6;">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="doctor"/>
                                        <String fx:value="nurse"/>
                                    </FXCollections>
                                </items>
                            </ComboBox>
                            <HBox spacing="5" style="-fx-padding: 5 0 0 0;">
                                <Label text="â„¹ï¸" style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;"/>
                                <Label text="Doctor = BÃ¡c sÄ© | Nurse = Y tÃ¡/Thu ngÃ¢n/Quáº£n lÃ½" 
                                       style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;"/>
                            </HBox>
                        </VBox>

                        <!-- Active Status -->
                        <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Tráº¡ng thÃ¡i" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10;">
                                <CheckBox fx:id="activeCheckBox"
                                         text="NhÃ¢n viÃªn Ä‘ang hoáº¡t Ä‘á»™ng"
                                         selected="true"
                                         style="-fx-font-size: 13px; -fx-text-fill: #2c3e50;"/>
                            </HBox>
                        </VBox>

                        <!-- License No (only visible for doctors) -->
                        <VBox fx:id="licenseBox" spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.columnSpan="2" 
                              managed="false" visible="false">
                            <Label text="Sá»‘ giáº¥y phÃ©p hÃ nh nghá» *" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;"/>
                            <TextField fx:id="licenseNoField"
                                      promptText="Nháº­p sá»‘ giáº¥y phÃ©p (báº¯t buá»™c cho bÃ¡c sÄ©)"
                                      style="-fx-font-size: 13px; -fx-background-color: #fff3cd; -fx-border-color: #ffc107; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 10;"/>
                            <HBox spacing="5">
                                <Label text="âš ï¸" style="-fx-font-size: 11px; -fx-text-fill: #f39c12;"/>
                                <Label text="Báº¯t buá»™c pháº£i nháº­p sá»‘ giáº¥y phÃ©p hÃ nh nghá» cho bÃ¡c sÄ©" 
                                       style="-fx-font-size: 11px; -fx-text-fill: #f39c12; -fx-font-weight: bold;"/>
                            </HBox>
                            <Label fx:id="licenseNoError" text="" 
                                   style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" 
                                   visible="false" managed="false"/>
                        </VBox>

                        <columnConstraints>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                        </columnConstraints>
                    </GridPane>
                </VBox>

                <Separator style="-fx-background-color: #ecf0f1;"/>

                <!-- ========== SECTION 4: Avatar Upload (Optional) ========== -->
                <VBox spacing="10">
                    <Label text="ðŸ“¸ áº¢nh Äáº¡i Diá»‡n (TÃ¹y chá»n)" 
                           style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-border-color: #9b59b6; -fx-border-width: 0 0 0 3; -fx-padding: 0 0 0 10;"/>
                    
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox alignment="CENTER" spacing="8" 
                              style="-fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 20; -fx-border-style: dashed; -fx-border-width: 2;">
                            <Label fx:id="avatarPreviewLabel" text="ðŸ‘¤" 
                                   style="-fx-font-size: 48px; -fx-text-fill: #95a5a6;"/>
                            <Label text="ChÆ°a cÃ³ áº£nh" 
                                   style="-fx-font-size: 11px; -fx-text-fill: #95a5a6;"/>
                        </VBox>
                        
                        <VBox spacing="10">
                            <TextField fx:id="avatarField"
                                      promptText="Nháº­p URL áº£nh hoáº·c Ä‘Æ°á»ng dáº«n"
                                      prefWidth="320"
                                      style="-fx-font-size: 12px; -fx-background-color: #f8f9fa; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8;"/>
                            <Label text="ðŸ’¡ Bá» trá»‘ng náº¿u chÆ°a cÃ³ áº£nh, cÃ³ thá»ƒ cáº­p nháº­t sau" 
                                   style="-fx-font-size: 11px; -fx-text-fill: #95a5a6;"/>
                        </VBox>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

    <!-- ========== FOOTER: Action Buttons ========== -->
    <bottom>
        <HBox spacing="12" alignment="CENTER" style="-fx-background-color: white; -fx-padding: 20 30; -fx-border-color: #ecf0f1; -fx-border-width: 1 0 0 0;">
            
            <Button fx:id="cancelButton"
                   text="âŒ Há»§y Bá»"
                   onAction="#handleCancel"
                   prefWidth="180"
                   style="-fx-background-color: #ecf0f1; -fx-text-fill: #34495e; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12 24; -fx-cursor: hand;"
                   onMouseEntered="#onButtonHover"
                   onMouseExited="#onButtonExit"/>

            <Button fx:id="saveButton"
                   text="ðŸ’¾ LÆ°u ThÃ´ng Tin"
                   onAction="#handleSave"
                   prefWidth="180"
                   defaultButton="true"
                   style="-fx-background-color: linear-gradient(to bottom, #2ecc71, #27ae60); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12 24; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 6, 0, 0, 2);"
                   onMouseEntered="#onButtonHover"
                   onMouseExited="#onButtonExit"/>
        </HBox>
    </bottom>

</BorderPane>
