<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800.0" prefWidth="1200.0" styleClass="main-container" stylesheets="@../../css/global-styles.css,@../../css/main.css,@../../css/forms.css,@../../css/buttons.css,@../../css/layouts.css,@../../css/tables.css,@../../css/financial-report.css,@../../css/navigation.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.oop.Control.Employee.EmployeeManagementController">

    <!-- ========== NAVIGATION BAR ========== -->
    <top>
        <VBox spacing="0">
            <!-- Navigation Buttons -->
            <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 12px 20px;" styleClass="navigation-bar">
                <Button fx:id="backButton" onAction="#handleBackButton" styleClass="nav-button nav-back-button" text="â—€ Quay láº¡i" />
                <Button fx:id="forwardButton" onAction="#handleForwardButton" styleClass="nav-button nav-forward-button" text="Tiáº¿n â–¶" />
                <Button fx:id="reloadButton" onAction="#handleReloadButton" styleClass="nav-button nav-reload-button" text="âŸ³ Táº£i láº¡i" />
            </HBox>

            <!-- Header Section -->
            <VBox spacing="0" style="-fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                <padding><Insets bottom="20" left="25" right="25" top="20" /></padding>

                <!-- Title Section -->
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <Label style="-fx-font-size: 32px;" text="ðŸ‘¥" />
                    <VBox spacing="2">
                        <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Quáº£n LÃ½ NhÃ¢n ViÃªn" />
                        <Label fx:id="subtitleLabel" style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;" text="Quáº£n lÃ½ thÃ´ng tin bÃ¡c sÄ© vÃ  nhÃ¢n viÃªn phÃ²ng khÃ¡m" />
                    </VBox>

                    <Region HBox.hgrow="ALWAYS" />

                    <!-- Quick Stats -->
                    <HBox alignment="CENTER" spacing="20">
                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #e3f2fd; -fx-background-radius: 8; -fx-padding: 10 15;">
                            <Label fx:id="doctorCountLabel" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #1976d2;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #1976d2;" text="BÃ¡c sÄ©" />
                        </VBox>

                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #e8f5e9; -fx-background-radius: 8; -fx-padding: 10 15;">
                            <Label fx:id="nurseCountLabel" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #388e3c;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #388e3c;" text="NhÃ¢n viÃªn" />
                        </VBox>

                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #fce4ec; -fx-background-radius: 8; -fx-padding: 10 15;">
                            <Label fx:id="activeCountLabel" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #c2185b;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #c2185b;" text="Äang hoáº¡t Ä‘á»™ng" />
                        </VBox>
                    </HBox>
                </HBox>

                <!-- Search & Filter Bar -->
                <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-padding: 15 0 0 0;">

                    <!-- Search Field -->
                    <HBox alignment="CENTER_LEFT" maxWidth="400" spacing="8" style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 8 12;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 16px;" text="ðŸ”" />
                        <TextField fx:id="searchField" promptText="TÃ¬m kiáº¿m theo tÃªn, email, username, sá»‘ Ä‘iá»‡n thoáº¡i..." style="-fx-background-color: transparent; -fx-border-width: 0; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                    </HBox>

                    <Separator orientation="VERTICAL" prefHeight="35" />

                    <!-- Role Filter -->
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label style="-fx-font-size: 13px; -fx-text-fill: #5a6c7d; -fx-font-weight: bold;" text="Vai trÃ²:" />
                        <ComboBox fx:id="roleFilterComboBox" prefWidth="140" style="-fx-background-color: white; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6;">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Táº¥t cáº£" />
                                    <String fx:value="doctor" />
                                    <String fx:value="nurse" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>

                    <!-- Status Filter -->
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label style="-fx-font-size: 13px; -fx-text-fill: #5a6c7d; -fx-font-weight: bold;" text="Tráº¡ng thÃ¡i:" />
                        <ComboBox fx:id="statusFilterComboBox" prefWidth="140" style="-fx-background-color: white; -fx-border-color: #dce4ec; -fx-border-radius: 6; -fx-background-radius: 6;">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Táº¥t cáº£" />
                                    <String fx:value="Hoáº¡t Ä‘á»™ng" />
                                    <String fx:value="KhÃ´ng hoáº¡t Ä‘á»™ng" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>

                    <Region HBox.hgrow="ALWAYS" />

                    <!-- Action Buttons -->
                    <Button fx:id="refreshButton" onAction="#handleRefresh" styleClass="btn-secondary" text="ðŸ”„ LÃ m má»›i" />
                    <Button fx:id="addButton" onAction="#handleAdd" styleClass="btn-success" text="âž• ThÃªm NhÃ¢n ViÃªn" />
                </HBox>
            </VBox>
        </VBox>
    </top>

    <!-- ========== CENTER: Table View ========== -->
    <center>
        <VBox spacing="0" style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2);">
            <VBox.margin><Insets bottom="20" left="25" right="25" top="20" /></VBox.margin>
            <padding><Insets bottom="15" left="15" right="15" top="15" /></padding>

            <TableView fx:id="employeeTableView" onMouseClicked="#onTableRowClick" style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-width: 0;" VBox.vgrow="ALWAYS">

                <columns>
                    <!-- ID Column -->
                    <TableColumn fx:id="idColumn" prefWidth="60" style="-fx-alignment: CENTER;" text="ID" />

                    <!-- Username Column -->
                    <TableColumn fx:id="usernameColumn" prefWidth="130" style="-fx-alignment: CENTER-LEFT;" text="TÃªn Ä‘Äƒng nháº­p" />

                    <!-- Full Name Column -->
                    <TableColumn fx:id="fullNameColumn" prefWidth="152.79998779296875" style="-fx-alignment: CENTER-LEFT;" text="Há» vÃ  TÃªn" />

                    <!-- Role Column -->
                    <TableColumn fx:id="roleColumn" prefWidth="116.0" style="-fx-alignment: CENTER;" text="Vai trÃ²" />

                    <!-- License No Column (for doctors) -->
                    <TableColumn fx:id="licenseColumn" prefWidth="146.4000244140625" style="-fx-alignment: CENTER;" text="Sá»‘ giáº¥y phÃ©p" />

                    <!-- Email Column -->
                    <TableColumn fx:id="emailColumn" prefWidth="211.99993896484375" style="-fx-alignment: CENTER-LEFT;" text="Email" />

                          <!-- Phone Column -->
                    <TableColumn fx:id="phoneColumn" prefWidth="190.4000244140625" style="-fx-alignment: CENTER;" text="Sá»‘ Ä‘iá»‡n thoáº¡i" />

                    <!-- Active Status Column -->
                    <TableColumn fx:id="activeColumn" prefWidth="150.40020751953125" style="-fx-alignment: CENTER;" text="Tráº¡ng thÃ¡i" />
                </columns>

                <!-- Placeholder khi table rá»—ng -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15" style="-fx-padding: 50;">
                        <Label style="-fx-font-size: 48px;" text="ðŸ“‹" />
                        <Label style="-fx-font-size: 16px; -fx-text-fill: #95a5a6; -fx-font-weight: bold;" text="ChÆ°a cÃ³ dá»¯ liá»‡u nhÃ¢n viÃªn" />
                        <Label style="-fx-font-size: 13px; -fx-text-fill: #bdc3c7;" text="Nháº¥n nÃºt 'ThÃªm NhÃ¢n ViÃªn' Ä‘á»ƒ báº¯t Ä‘áº§u" />
                    </VBox>
                </placeholder>
            </TableView>
        </VBox>
    </center>

    <!-- ========== BOTTOM: Status Bar ========== -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: white; -fx-border-color: #ecf0f1; -fx-border-width: 1 0 0 0; -fx-padding: 12 25;">
            <Label style="-fx-font-size: 14px;" text="ðŸ“Š" />
            <Label fx:id="totalCountLabel" style="-fx-font-size: 13px; -fx-text-fill: #34495e; -fx-font-weight: bold;" text="Tá»•ng: 0 nhÃ¢n viÃªn" />

            <Separator orientation="VERTICAL" prefHeight="20" />

            <Label fx:id="filterInfoLabel" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;" text="" />

            <Region HBox.hgrow="ALWAYS" />

            <HBox alignment="CENTER" spacing="8">
                <Label style="-fx-font-size: 12px; -fx-text-fill: #2ecc71;" text="â—" />
                <Label fx:id="statusLabel" style="-fx-font-size: 12px; -fx-text-fill: #2ecc71; -fx-font-weight: bold;" text="Sáºµn sÃ ng" />
                <Button fx:id="deleteButton" onAction="#handleDelete" styleClass="btn-delete" text="ðŸ—‘ XÃ³a" />
            </HBox>

            <Separator orientation="VERTICAL" prefHeight="20" />
        </HBox>
    </bottom>
</BorderPane>
