<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800.0" prefWidth="1280.0" styleClass="main-container" stylesheets="@../../css/main.css,@../../css/forms.css,@../../css/buttons.css,@../../css/layouts.css,@../../css/financial-report.css,@../../css/navigation.css,@../../css/global-styles.css,@../../css/tables.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.oop.Control.Employee.EmployeeManagementController">

    <!-- ========== NAVIGATION BAR ========== -->
    <top>
        <VBox spacing="0">
            <!-- Navigation Buttons -->
            <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 12px 20px;" styleClass="navigation-bar">
                <Button fx:id="backButton" onAction="#handleBackButton" styleClass="nav-button nav-back-button" text="â—€ Quay láº¡i" />
                <Button fx:id="forwardButton" onAction="#handleForwardButton" styleClass="nav-button nav-forward-button" text="Tiáº¿n â–¶" />
                <Button fx:id="reloadButton" onAction="#handleReloadButton" styleClass="nav-button nav-reload-button" text="âŸ³ Táº£i láº¡i" />
                
                <!-- Loading Status Indicator -->
                <HBox fx:id="loadingStatusContainer" alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 5px 15px; -fx-background-color: rgba(14,165,233,0.1); -fx-background-radius: 8px; -fx-border-color: #0EA5E9; -fx-border-width: 1px; -fx-border-radius: 8px;" visible="false">
                    <ProgressIndicator fx:id="statusProgressIndicator" prefHeight="20.0" prefWidth="20.0" style="-fx-progress-color: #0EA5E9;" />
                    <Label fx:id="loadingStatusLabel" style="-fx-text-fill: #0EA5E9; -fx-font-weight: 600; -fx-font-size: 13px;" text="â³ Äang táº£i dá»¯ liá»‡u..." />
                </HBox>
            </HBox>

            <!-- Header Section with Modern Gradient -->
            <HBox alignment="CENTER_LEFT" spacing="16.0" style="-fx-background-color: linear-gradient(to right, #0EA5E9, #0284C7); -fx-padding: 20px 24px; -fx-effect: dropshadow(gaussian, rgba(14,165,233,0.3), 15, 0, 0, 4);" styleClass="financial-header">
                <padding>
                    <Insets bottom="20" left="25" right="25" top="20" />
                </padding>

                <!-- Title Section -->
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <Label style="-fx-font-size: 32px;" text="ðŸ‘¥" />
                    <VBox spacing="2">
                        <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 2, 0, 0, 1);" text="Quáº£n LÃ½ NhÃ¢n ViÃªn" />
                        <Label fx:id="subtitleLabel" style="-fx-font-size: 13px; -fx-text-fill: rgba(255,255,255,0.9);" text="Quáº£n lÃ½ thÃ´ng tin bÃ¡c sÄ© vÃ  nhÃ¢n viÃªn phÃ²ng khÃ¡m" />
                    </VBox>

                    <Region HBox.hgrow="ALWAYS" />

                    <!-- Quick Stats -->
                    <HBox alignment="CENTER" prefHeight="69.0" prefWidth="775.0" spacing="20">
                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 10; -fx-padding: 12 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0, 0, 2);">
                            <Label fx:id="doctorCountLabel" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #0EA5E9;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #0284C7; -fx-font-weight: 600;" text="BÃ¡c sÄ©" />
                        </VBox>

                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 10; -fx-padding: 12 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0, 0, 2);">
                            <Label fx:id="nurseCountLabel" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #10B981;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #059669; -fx-font-weight: 600;" text="NhÃ¢n viÃªn" />
                        </VBox>

                        <VBox alignment="CENTER" spacing="3" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 10; -fx-padding: 12 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0, 0, 2);">
                            <Label fx:id="activeCountLabel" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #F59E0B;" text="0" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #D97706; -fx-font-weight: 600;" text="Äang hoáº¡t Ä‘á»™ng" />
                        </VBox>
                    </HBox>
                </HBox>
            </HBox>

            <Separator />

            <!-- Search & Filter Bar -->
            <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-padding: 16px 24px; -fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 8, 0, 0, 2);">

                <!-- Search Field -->
                <HBox alignment="CENTER_LEFT" maxWidth="400" spacing="8" style="-fx-background-color: #F0F9FF; -fx-background-radius: 10; -fx-padding: 10 14; -fx-border-color: #BAE6FD; -fx-border-width: 1; -fx-border-radius: 10;" HBox.hgrow="ALWAYS">
                    <Label style="-fx-font-size: 16px;" text="ðŸ”" />
                    <TextField fx:id="searchField" promptText="TÃ¬m kiáº¿m theo tÃªn, email, username, sá»‘ Ä‘iá»‡n thoáº¡i..." style="-fx-background-color: transparent; -fx-border-width: 0; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                </HBox>

                <Separator orientation="VERTICAL" prefHeight="35" />

                <!-- Role Filter -->
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-size: 13px; -fx-text-fill: #0284C7; -fx-font-weight: bold;" text="Vai trÃ²:" />
                    <ComboBox fx:id="roleFilterComboBox" prefWidth="140" styleClass="combo-rounded">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Táº¥t cáº£" />
                                <String fx:value="doctor" />
                                <String fx:value="nurse" />
                            </FXCollections>
                        </items>
                    </ComboBox>
                </HBox>

                <!-- Status Filter -->
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-size: 13px; -fx-text-fill: #0284C7; -fx-font-weight: bold;" text="Tráº¡ng thÃ¡i:" />
                    <ComboBox fx:id="statusFilterComboBox" prefWidth="140" styleClass="combo-rounded">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Táº¥t cáº£" />
                                <String fx:value="Hoáº¡t Ä‘á»™ng" />
                                <String fx:value="KhÃ´ng hoáº¡t Ä‘á»™ng" />
                            </FXCollections>
                        </items>
                    </ComboBox>
                </HBox>

                <Region HBox.hgrow="ALWAYS" />

                <!-- Action Buttons -->
                <Button fx:id="exportButton" onAction="#handleExport" styleClass="export-button" text="ðŸ“Š Export" />
                <Button fx:id="refreshButton" onAction="#handleRefresh" styleClass="btn-secondary" text="ðŸ”„ LÃ m má»›i" />
                <Button fx:id="addButton" onAction="#handleAdd" styleClass="btn-success" text="âž• ThÃªm NhÃ¢n ViÃªn" />
            </HBox>
        </VBox>
    </top>

    <!-- ========== CENTER: Table View ========== -->
    <center>
        <VBox spacing="0" style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(14,165,233,0.1), 12, 0, 0, 3);">
            <VBox.margin><Insets bottom="20" left="25" right="25" top="20" /></VBox.margin>
            <padding><Insets bottom="15" left="15" right="15" top="15" /></padding>

            <TableView fx:id="employeeTableView" onMouseClicked="#onTableRowClick" styleClass="financial-table" VBox.vgrow="ALWAYS">

                <columns>
                    <!-- ID Column -->
                    <TableColumn fx:id="idColumn" prefWidth="60" style="-fx-alignment: CENTER;" text="ID" />

                    <!-- Username Column -->
                    <TableColumn fx:id="usernameColumn" prefWidth="130" style="-fx-alignment: CENTER-LEFT;" text="TÃªn Ä‘Äƒng nháº­p" />

                    <!-- Full Name Column -->
                    <TableColumn fx:id="fullNameColumn" prefWidth="152.79998779296875" style="-fx-alignment: CENTER-LEFT;" text="Há» vÃ  TÃªn" />

                    <!-- Role Column -->
                    <TableColumn fx:id="roleColumn" prefWidth="116.0" style="-fx-alignment: CENTER;" text="Vai trÃ²" />

                    <!-- License No Column (for doctors) -->
                    <TableColumn fx:id="licenseColumn" prefWidth="146.4000244140625" style="-fx-alignment: CENTER;" text="Sá»‘ giáº¥y phÃ©p" />

                    <!-- Email Column -->
                    <TableColumn fx:id="emailColumn" prefWidth="211.99993896484375" style="-fx-alignment: CENTER-LEFT;" text="Email" />

                    <!-- Phone Column -->
                    <TableColumn fx:id="phoneColumn" prefWidth="190.4000244140625" style="-fx-alignment: CENTER;" text="Sá»‘ Ä‘iá»‡n thoáº¡i" />

                    <!-- Active Status Column -->
                    <TableColumn fx:id="activeColumn" prefWidth="150.40020751953125" style="-fx-alignment: CENTER;" text="Tráº¡ng thÃ¡i" />
                </columns>

                <!-- Placeholder khi table rá»—ng -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15" style="-fx-padding: 50;">
                        <Label style="-fx-font-size: 48px;" text="ðŸ“‹" />
                        <Label style="-fx-font-size: 16px; -fx-text-fill: #64748B; -fx-font-weight: bold;" text="ChÆ°a cÃ³ dá»¯ liá»‡u nhÃ¢n viÃªn" />
                        <Label style="-fx-font-size: 13px; -fx-text-fill: #94A3B8;" text="Nháº¥n nÃºt 'ThÃªm NhÃ¢n ViÃªn' Ä‘á»ƒ báº¯t Ä‘áº§u" />
                    </VBox>
                </placeholder>
            </TableView>
        </VBox>
    </center>

    <!-- ========== BOTTOM: Status Bar ========== -->
    <bottom>
        <VBox>
            <Separator />
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: linear-gradient(to right, #0EA5E9, #0284C7); -fx-padding: 14px 25px;">
                <Label style="-fx-font-size: 14px;" text="ðŸ“Š" />
                <Label fx:id="totalCountLabel" style="-fx-font-size: 13px; -fx-text-fill: white; -fx-font-weight: bold;" text="Tá»•ng: 0 nhÃ¢n viÃªn" />

                <Separator orientation="VERTICAL" prefHeight="20" />

                <Label fx:id="filterInfoLabel" style="-fx-font-size: 12px; -fx-text-fill: rgba(255,255,255,0.9);" text="" />

                <Region HBox.hgrow="ALWAYS" />

                <HBox alignment="CENTER" spacing="12">
                    <Label style="-fx-font-size: 12px; -fx-text-fill: #10B981;" text="â—" />
                    <Label fx:id="statusLabel" style="-fx-font-size: 12px; -fx-text-fill: white; -fx-font-weight: bold;" text="Sáºµn sÃ ng" />
                    <Button fx:id="deleteButton" onAction="#handleDelete" styleClass="btn-danger" text="ðŸ—‘ XÃ³a" />
                </HBox>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>

