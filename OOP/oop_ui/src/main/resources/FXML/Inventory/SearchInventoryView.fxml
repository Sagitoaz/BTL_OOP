<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800.0" prefWidth="1280.0" styleClass="main-container" stylesheets="@../../css/main.css,@../../css/forms.css,@../../css/buttons.css,@../../css/layouts.css,@../../css/financial-report.css,@../../css/navigation.css,@../../css/global-styles.css,@../../css/tables.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.oop.Control.Inventory.SearchInventoryController">

    <!-- TOP: Header & Filters -->
    <top>
        <VBox>
            <!-- Navigation Bar -->
            <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 12px 20px;" styleClass="navigation-bar">
                <Button fx:id="backButton" onAction="#handleBackButton" styleClass="nav-button nav-back-button" text="â—€ Quay láº¡i" />
                <Button fx:id="forwardButton" onAction="#handleForwardButton" styleClass="nav-button nav-forward-button" text="Tiáº¿n â–¶" />
                <Button fx:id="reloadButton" onAction="#handleReloadButton" styleClass="nav-button nav-reload-button" text="âŸ³ Táº£i láº¡i" />
                
                <!-- Loading Status Indicator -->
                <HBox fx:id="loadingStatusContainer" alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 5px 15px; -fx-background-color: rgba(14,165,233,0.1); -fx-background-radius: 8px; -fx-border-color: #0EA5E9; -fx-border-width: 1px; -fx-border-radius: 8px;" visible="false">
                    <ProgressIndicator fx:id="statusProgressIndicator" prefHeight="20.0" prefWidth="20.0" style="-fx-progress-color: #0EA5E9;" />
                    <Label fx:id="loadingStatusLabel" style="-fx-text-fill: #0EA5E9; -fx-font-weight: 600; -fx-font-size: 13px;" text="â³ Äang táº£i dá»¯ liá»‡u..." />
                </HBox>
            </HBox>
            
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" spacing="16.0" style="-fx-background-color: linear-gradient(to right, #0EA5E9, #0284C7); -fx-padding: 20px 24px; -fx-effect: dropshadow(gaussian, rgba(14,165,233,0.3), 15, 0, 0, 4);" styleClass="financial-header">
                <padding>
                    <Insets bottom="16.0" left="24.0" right="24.0" top="16.0" />
                </padding>
                <Label style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: 700; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 2, 0, 0, 1);" styleClass="page-title" text="ðŸ” TÃŒM KIáº¾M VÃ€ LÆ¯á»¢C XEM KHO" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="countLabel" style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600;" styleClass="form-label" text="0 sáº£n pháº©m" />
            </HBox>

            <Separator />

            <!-- Filters Row -->
            <HBox alignment="CENTER_LEFT" spacing="12.0" style="-fx-padding: 12px 24px; -fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 8, 0, 0, 2);">
                <padding>
                    <Insets bottom="12.0" left="24.0" right="24.0" top="12.0" />
                </padding>
                <TextField fx:id="searchTextField" prefHeight="46.0" prefWidth="173.0" promptText="TÃ¬m kiáº¿m..." styleClass="text-field" />
                <ComboBox fx:id="categoryBox" prefWidth="150.0" promptText="Danh má»¥c" styleClass="combo-rounded" />
                <ComboBox fx:id="statusBox" prefWidth="150.0" promptText="Tráº¡ng thÃ¡i" styleClass="combo-rounded" />
                <DatePicker fx:id="lastUpdatedPicker" prefHeight="46.0" prefWidth="198.0" promptText="Cáº­p nháº­t láº§n cuá»‘i" style="-fx-background-color: white; -fx-border-color: transparent; -fx-border-width: 0;" />

                <Region HBox.hgrow="ALWAYS" />

                <Button fx:id="searchButton" onAction="#OnClickSearchButton" prefHeight="40.0" prefWidth="141.0" text="ðŸ” TÃ¬m kiáº¿m" />
                <Button fx:id="resetButton" onAction="#OnClickResetButton" prefHeight="49.0" prefWidth="166.0" styleClass="btn-secondary" text="ðŸ”„ LÃ m má»›i" />
                <Button fx:id="exportButton" onAction="#OnClickExportButton" prefHeight="49.0" prefWidth="149.0" styleClass="export-button" text="ðŸ“Š Export" />
            </HBox>
        </VBox>
    </top>

    <center>
        <TableView fx:id="inventoryTable" styleClass="financial-table" BorderPane.alignment="CENTER">
            <columns>
                <TableColumn fx:id="idColumn" minWidth="50" prefWidth="60" sortable="true" text="ID" />
                <TableColumn fx:id="nameColumn" minWidth="150" prefWidth="200" sortable="true" text="TÃªn sáº£n pháº©m" />
                <TableColumn fx:id="skuColumn" minWidth="60.0" prefWidth="66.4000244140625" sortable="true" text="SKU" />
                <TableColumn fx:id="categoryColumn" minWidth="93.60000610351562" prefWidth="114.39996337890625" sortable="true" text="Danh má»¥c" />
                <TableColumn fx:id="statusColumn" minWidth="80.79998779296875" prefWidth="104.00003051757812" sortable="true" text="Tráº¡ng thÃ¡i" />
                <TableColumn fx:id="quantityColumn" minWidth="80" prefWidth="100.800048828125" sortable="true" text="Sá»‘ lÆ°á»£ng" />
                <TableColumn fx:id="unitColumn" minWidth="80" prefWidth="90" sortable="true" text="ÄÆ¡n vá»‹" />
                <TableColumn fx:id="priceColumn" minWidth="100" prefWidth="120" sortable="true" text="ÄÆ¡n giÃ¡" />
            </columns>

            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>

            <placeholder>
                <VBox alignment="CENTER" prefHeight="554.0" prefWidth="770.0" spacing="10">
                    <padding>
                        <Insets bottom="40" left="40" right="40" top="40" />
                    </padding>
                    <Label text="KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m" />
                    <Label text="Thá»­ Ä‘iá»u chá»‰nh bá»™ lá»c cá»§a báº¡n" />
                </VBox>
            </placeholder>
        </TableView>
    </center>

    <right>
        <ScrollPane fitToWidth="true" prefWidth="400.0" styleClass="scroll-pane">
            <VBox spacing="16.0" BorderPane.alignment="CENTER">
                <padding>
                    <Insets bottom="24.0" left="24.0" right="24.0" top="24.0" />
                </padding>

                <!-- BASIC INFORMATION -->
                <TitledPane expanded="true" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="ðŸ“ CHI TIáº¾T Sáº¢N PHáº¨M">
                    <VBox spacing="10.0">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <Label fx:id="itemName" style="-fx-font-size: 16px; -fx-font-weight: bold;" text="TÃªn sáº£n pháº©m" />
                        <Separator />
                        <GridPane hgap="10.0" vgap="8.0">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="40" />
                                <ColumnConstraints percentWidth="60" />
                            </columnConstraints>

                            <Label styleClass="form-label" text="SKU:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                            <Label fx:id="quickSku" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                            <Label styleClass="form-label" text="Danh má»¥c:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                            <Label fx:id="quickCategory" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                            <Label styleClass="form-label" text="Tráº¡ng thÃ¡i:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                            <Label fx:id="quickStatus" text="-" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                     <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                     </rowConstraints>
                        </GridPane>
                    </VBox>
                </TitledPane>

                <!-- PRICING INFORMATION -->
                <TitledPane expanded="true" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="ðŸ’° THÃ”NG TIN GIÃ">
                    <GridPane hgap="10.0" vgap="8.0">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints percentWidth="45" />
                            <ColumnConstraints percentWidth="55" />
                        </columnConstraints>

                        <Label styleClass="form-label" text="ÄÆ¡n giÃ¡:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="quickPrice" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                        <Label styleClass="form-label" text="GiÃ¡ vá»‘n:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="quickCostPrice" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>
                </TitledPane>

                <!-- STOCK INFORMATION -->
                <TitledPane expanded="true" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="ðŸ“¦ THÃ”NG TIN Tá»’N KHO">
                    <GridPane hgap="10.0" vgap="8.0">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints percentWidth="45" />
                            <ColumnConstraints percentWidth="55" />
                        </columnConstraints>

                        <Label styleClass="form-label" text="Sá»‘ lÆ°á»£ng:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="quickQuantity" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                        <Label styleClass="form-label" text="ÄÆ¡n vá»‹:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="quickUnit" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>
                </TitledPane>

                <!-- ADDITIONAL DETAILS -->
                <TitledPane expanded="false" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="THÃ”NG TIN Bá»” SUNG">
                    <GridPane hgap="10.0" vgap="8.0">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints percentWidth="45" />
                            <ColumnConstraints percentWidth="55" />
                        </columnConstraints>

                        <Label styleClass="form-label" text="Batch No:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="quickBatchNumber" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                        <Label styleClass="form-label" text="Háº¡n dÃ¹ng:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="quickExpiryDate" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                        <Label styleClass="form-label" text="Serial No:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <Label fx:id="quickserialNo" text="-" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                        <Label styleClass="form-label" text="NgÃ y táº¡o:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                        <Label fx:id="quickCreatedAt" text="-" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>
                </TitledPane>

                <!-- IMAGE -->
                <TitledPane expanded="false" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="HÃŒNH áº¢NH">
                    <VBox alignment="CENTER">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <ImageView fx:id="itemImage" fitHeight="240.0" fitWidth="320.0" pickOnBounds="true" preserveRatio="true" />
                    </VBox>
                </TitledPane>

                <!-- NOTES -->
                <TitledPane expanded="true" style="-fx-background-color: white; -fx-border-color: #BAE6FD; -fx-border-width: 2px; -fx-border-radius: 12px;" text="ðŸ“ GHI CHÃš">
                    <VBox>
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>
                        <TextArea fx:id="itemDescription" prefRowCount="4" promptText="ThÃ´ng tin vÃ  ghi chÃº bá»• sung..." styleClass="text-area" wrapText="true" />
                    </VBox>
                </TitledPane>
            </VBox>
        </ScrollPane>
    </right>

    <bottom>
        <VBox>
            <Separator />
        </VBox>
    </bottom>

</BorderPane>

